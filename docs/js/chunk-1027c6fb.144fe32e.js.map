{"version":3,"sources":["webpack:///./src/components/week3/ex-component.vue?7329","webpack:///./src/components/week3/ex-component.vue","webpack:///./src/components/week3/ex-component.vue?b3f1","webpack:///./src/components/week3/ex-component.vue?336b","webpack:///./src/scripts/week3/utils.ts","webpack:///./src/views/week3/ex3.vue?1427","webpack:///./src/scripts/week3/ex3.ts","webpack:///./src/views/week3/ex3.vue","webpack:///./src/views/week3/ex3.vue?bdc3","webpack:///./src/views/week3/ex3.vue?317c","webpack:///./src/scripts/week3/ex1.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","_s","title","validInputExplanation","directives","name","rawName","value","expression","domProps","on","$event","target","composing","input","result","calculate","trim","test","staticRenderFns","required","type","String","Function","component","tokenize","validOperators","tokens","index","length","isNaN","readOperator","token","idx","push","readNumber","num","decimal","includes","attrs","mainEx3","utils","ans","calculateBracketedFormula","count","beginIdx","indexOf","partialTokens","slice","unshift","partialAns","newTokens","concat","components","ExComponent","mainEx1","calculateMultiplicationAndDivision","calculateAdditionAndSubtraction","i","newTokenValue"],"mappings":"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","file":"js/chunk-1027c6fb.144fe32e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',[_vm._v(_vm._s(_vm.title))]),_c('div',[_vm._v(_vm._s(_vm.validInputExplanation))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.input),expression:\"input\"}],domProps:{\"value\":(_vm.input)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.input=$event.target.value}}}),_c('br'),_c('button',{on:{\"click\":function($event){_vm.result = _vm.calculate(_vm.input.trim())}}},[_vm._v(\"計算\")]),_c('button',{on:{\"click\":function($event){_vm.result = _vm.test()}}},[_vm._v(\"テスト\")]),_c('div',[_vm._v(\"結果: \"+_vm._s(_vm.result))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Component, Prop } from 'vue-property-decorator'\n\n@Component({\n  name: 'ExComponent',\n})\nexport default class extends Vue {\n  @Prop({ required: true, type: String }) title!: string\n  @Prop({ required: true, type: String }) validInputExplanation!: string\n  @Prop({ required: true, type: Function }) calculate!: (\n    input: string\n  ) => number | 'error'\n  @Prop({ required: true, type: Function }) test!: () => 'OK' | 'NG'\n\n  input = ''\n  result: string | number = ''\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ex-component.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ex-component.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ex-component.vue?vue&type=template&id=c3a6ed6c&\"\nimport script from \"./ex-component.vue?vue&type=script&lang=ts&\"\nexport * from \"./ex-component.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { Token, Operator } from './type'\n\n/** 入力を Token 型の配列に変換 */\nexport const tokenize = (input: string, validOperators: Operator[]) => {\n  const tokens: Token[] = ['+'] // ダミーの + を挿入\n  let index = 0\n  while (index < input.length) {\n    if (!isNaN(+input[index])) {\n      const { token, idx } = readNumber(input, index)\n      tokens.push(token)\n      index = idx\n    } else {\n      const { token, idx } = readOperator(input, index, validOperators)\n      if (token === null) return null\n      tokens.push(token)\n      index = idx\n    }\n  }\n  return tokens\n}\n\n/** 数字読み込み */\nconst readNumber = (input: string, idx: number) => {\n  let num = 0\n  /** 整数部分読み込み */\n  while (idx < input.length && !isNaN(+input[idx])) {\n    num = num * 10 + +input[idx]\n    idx += 1\n  }\n  /** 小数部分読み込み */\n  if (input[idx] == '.') {\n    let decimal = 0.1\n    idx += 1\n    while (idx < input.length && !isNaN(+input[idx])) {\n      num += +input[idx] * decimal\n      decimal /= 10\n      idx += 1\n    }\n  }\n  const token = num\n  return { token, idx }\n}\n\n/** 演算子の読み込み */\nconst readOperator = (\n  input: string,\n  idx: number,\n  validOperators: Operator[]\n) => {\n  if (validOperators.includes(input[idx] as Operator)) {\n    const token = input[idx] as Operator\n    idx += 1\n    return { token, idx }\n  }\n  const token = null\n  idx += 1\n  return { token, idx }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',[_vm._v(\"Week3\")]),_c('ex-component',{attrs:{\"title\":\"宿題3\",\"valid-input-explanation\":\"半角数字(小数含む)と+-*/()が入力可能\",\"calculate\":_vm.calculate,\"test\":_vm.test}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Token } from './type'\nimport * as utils from './utils'\nimport { calculate } from './ex1'\n\nexport const mainEx3 = (input: string) => {\n  const tokens = utils.tokenize(input, ['+', '-', '*', '/', '(', ')'])\n  if (tokens === null) return 'error'\n  const ans = calculateBracketedFormula(tokens)\n  return ans\n}\n\nexport const test = () => {\n  let ans = 2\n  let result = mainEx3('(1+1)')\n  if (result !== ans) return 'NG'\n\n  ans = 2\n  result = mainEx3('2*(1+1)/2')\n  if (result !== ans) return 'NG'\n\n  result = mainEx3('1+(2+3')\n  if (result !== 'error') return 'NG'\n\n  result = mainEx3('1)+2+3')\n  if (result !== 'error') return 'NG'\n\n  ans = 1.4\n  result = mainEx3('(3+4*(2-1))/5')\n  if (result !== ans) return 'NG'\n\n  ans = 18\n  result = mainEx3('((1+1)+1)*(3+3)')\n  if (result !== ans) return 'NG'\n\n  ans = 5\n  result = mainEx3('1+(1+(1+1))+1')\n  if (result !== ans) return 'NG'\n\n  return 'OK'\n}\n\n/** () を含む数式を計算 */\nconst calculateBracketedFormula = (tokens: Token[]): number | 'error' => {\n  // かっこが対になっていなかったらエラー\n  if (tokens.includes('(') && !tokens.includes(')')) return 'error'\n  if (!tokens.includes('(') && tokens.includes(')')) return 'error'\n\n  if (tokens.includes('(')) {\n    let count = 0\n    const beginIdx = tokens.indexOf('(')\n    let idx = beginIdx + 1\n    // 対になるかっこを探す\n    while (count !== 0 || tokens[idx] !== ')') {\n      if (tokens[idx] === '(') count += 1\n      if (tokens[idx] === ')') count -= 1\n      idx += 1\n    }\n    // () の内側を計算済みのものに置き換えて数式を再構築し、再度計算\n    const partialTokens = tokens.slice(beginIdx + 1, idx)\n    partialTokens.unshift('+')\n    const partialAns = calculateBracketedFormula(partialTokens)\n    if (partialAns === 'error') return 'error'\n    let newTokens = tokens.slice(0, beginIdx)\n    newTokens.push(partialAns)\n    newTokens = newTokens.concat(tokens.slice(idx + 1))\n    return calculateBracketedFormula(newTokens)\n  }\n  // () が無ければ普通に計算\n  return calculate(tokens)\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Component } from 'vue-property-decorator'\nimport ExComponent from '@/components/week3/ex-component.vue'\nimport { mainEx3, test } from '@/scripts/week3/ex3'\n\n@Component({\n  name: 'Week3Ex3',\n  components: {\n    ExComponent,\n  },\n})\nexport default class extends Vue {\n  calculate = mainEx3\n  test = test\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ex3.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ex3.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ex3.vue?vue&type=template&id=468db152&\"\nimport script from \"./ex3.vue?vue&type=script&lang=ts&\"\nexport * from \"./ex3.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { Token } from './type'\nimport * as utils from './utils'\n\nexport const mainEx1 = (input: string) => {\n  const tokens = utils.tokenize(input.trim(), ['+', '-', '*', '/'])\n  if (tokens === null) return 'error'\n  const ans = calculate(tokens)\n  return ans\n}\n\n/** () が無い式の計算 */\nexport const calculate = (tokens: Token[]) => {\n  const newTokens = calculateMultiplicationAndDivision(tokens)\n  const ans = calculateAdditionAndSubtraction(newTokens)\n  return ans\n}\n\n/** 掛け算と割り算のみ計算 */\nconst calculateMultiplicationAndDivision = (tokens: Token[]) => {\n  const newTokens: Token[] = []\n  for (let i = 0; i < tokens.length; i += 2) {\n    if (tokens[i] === '+' || tokens[i] === '-') {\n      newTokens.push(tokens[i])\n      newTokens.push(tokens[i + 1])\n      continue\n    }\n    if (tokens[i] === '*') {\n      const newTokenValue = +newTokens[newTokens.length - 1]\n      newTokens[newTokens.length - 1] = newTokenValue * +tokens[i + 1]\n    }\n    if (tokens[i] === '/') {\n      const newTokenValue = +newTokens[newTokens.length - 1]\n      newTokens[newTokens.length - 1] = newTokenValue / +tokens[i + 1]\n    }\n  }\n  return newTokens\n}\n\n/** 足し算と引き算のみの式を計算する */\nconst calculateAdditionAndSubtraction = (tokens: Token[]) => {\n  let ans = 0\n  for (let i = 0; i < tokens.length; i += 2) {\n    if (tokens[i] === '+') {\n      ans += +tokens[i + 1]\n    }\n    if (tokens[i] === '-') {\n      ans -= +tokens[i + 1]\n    }\n  }\n  return ans\n}\n"],"sourceRoot":""}